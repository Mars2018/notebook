问题
---
前几天写JS页面时发现了一个奇怪的问题：

我想实现的功能是想通过confirm弹窗让用户选择不同的需求，每次选择后都将结果暂时输出到页面上，最后一次选择结束后再一次性将选项传到后端处理，可是实现后却发现：每次在用户confirm之后，页面并没有刷新，而是到最后一步发到后端时才一次性刷新。

后续尝试了 alert 和 promt 这两个跟 confirm 类似的弹窗，情况都与此相同。

此时，还有更诡异的情况，我们给某一个div里赋值后，立刻alert此div里的内容，会发现alert显示正确的内容，而div里的内容却没有更新

导致
---
解决这个问题之前先了解一下它是怎么产生的。

javascript中alert是Bom中的成员函数，BOM是以window对象为依托，代表浏览器窗口和页面的可见区域等,也就是说alert()实际上是window.alert()。

GUI渲染线程负责渲染浏览器界面，当界面需要重绘（Repaint）或由于某种操作引发回流(reflow)时,该线程就会执行。但需要注意 GUI渲染线程与JS引擎是互斥的，当JS引擎执行时GUI线程会被挂起，GUI更新会被保存在一个队列中等到JS引擎空闲时立即被执行

JavaScript 引擎是单线程运行的,浏览器无论在什么时候都只且只有一个线程在运行JavaScript程序
javascript 引擎是基于事件驱动单线程执行的，JS引擎一直等待着任务队列中任务的到来，然后加以处理，浏览器无论什么时候都只有一个JS线程在运行JS程序。

事件触发线程，当一个事件被触发时该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理。这些事件可来自 JavaScript 引擎当前执行的代码块如 setTimeOut，也可来自浏览器内核的其他线程如鼠标点击、AJAX 异步请求等，但由于JS的单线程关系所有这些事件都得排队等待JS引擎处理。（当线程中没有执行任何同步代码的前提下才会执行异步代码）

浏览器的主线程是事件循环。它是一个无限循环，永远处于接受处理状态，并等待事件（如布局和绘制事件）发生，并进行处理。

alert的对话框是模态的。对话框一般分为两种：模态和非模态，模态对话框：就是指除非采取有效的关闭手段，用户的鼠标焦点或者输入光标将一直停留在其上的对话框。非模态对话框则不会强制此种特性，用户可以在当前对话框以及其他窗口间进行切换。显然window.alert函数弹出的对话框是模态的，具有阻塞性质的，不点击是不会执行后续代码的。

自定义alert

其他方式